{"ast":null,"code":"import _everyInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/every\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";import _Object$values from \"@babel/runtime-corejs3/core-js-stable/object/values\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { styled, t } from '@superset-ui/core';\nimport React from 'react';\nimport Icon from 'src/components/Icon';\nimport Button from 'src/components/Button';\nimport { useSelector } from 'react-redux';\nimport { getInitialMask } from 'src/dataMask/reducer';\nimport FilterConfigurationLink from './FilterConfigurationLink';\nimport { useFilters } from './state';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst TitleArea = styled.h4`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 0;\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n\n  & > span {\n    flex-grow: 1;\n  }\n`;\nconst ActionButtons = styled.div`\n  display: grid;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 10px;\n  grid-template-columns: 1fr 1fr;\n  ${({ theme }) => `padding: 0 ${theme.gridUnit * 2}px ${theme.gridUnit * 2}px`};\n\n  .btn {\n    flex: 1;\n  }\n`;\nconst Header = ({ onApply, isApplyDisabled, dataMaskSelected, dataMaskApplied, setDataMaskSelected, toggleFiltersBar }) => {var _context;\n  const filters = useFilters();\n  const filterValues = _Object$values(filters);\n  const canEdit = useSelector(({ dashboardInfo }) => dashboardInfo.dash_edit_perm);\n  const handleClearAll = () => {\n    _forEachInstanceProperty(filterValues).call(filterValues, filter => {\n      setDataMaskSelected(draft => {\n        draft[filter.id] = getInitialMask(filter.id);\n      });\n    });\n  };\n  const isClearAllDisabled = _everyInstanceProperty(_context = _Object$values(dataMaskApplied)).call(_context, filter => {var _dataMaskSelected$fil, _dataMaskSelected$fil2, _filter$currentState;return ((_dataMaskSelected$fil = dataMaskSelected[filter.id]) == null ? void 0 : (_dataMaskSelected$fil2 = _dataMaskSelected$fil.currentState) == null ? void 0 : _dataMaskSelected$fil2.value) === null ||\n    !dataMaskSelected[filter.id] && ((_filter$currentState = filter.currentState) == null ? void 0 : _filter$currentState.value) === null;});\n  return ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(TitleArea, null,\n  ___EmotionJSX(\"span\", null, t('Filters')),\n  canEdit && ___EmotionJSX(FilterConfigurationLink, { createNewOnOpen: filterValues.length === 0 },\n  ___EmotionJSX(Icon, { name: \"edit\", \"data-test\": \"create-filter\" })),\n\n  ___EmotionJSX(Icon, { name: \"expand\", onClick: () => toggleFiltersBar(false) })),\n\n  ___EmotionJSX(ActionButtons, null,\n  ___EmotionJSX(Button, { disabled: isClearAllDisabled, buttonStyle: \"tertiary\", buttonSize: \"small\", onClick: handleClearAll, \"data-test\": \"filter-reset-button\" },\n  t('Clear all')),\n\n  ___EmotionJSX(Button, { disabled: isApplyDisabled, buttonStyle: \"primary\", htmlType: \"submit\", buttonSize: \"small\", onClick: onApply, \"data-test\": \"filter-apply-button\" },\n  t('Apply'))));\n\n\n\n};__signature__(Header, \"useFilters{filters}\\nuseSelector{canEdit}\", () => [useFilters, useSelector]);const _default =\nHeader;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TitleArea, \"TitleArea\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header.tsx\");reactHotLoader.register(ActionButtons, \"ActionButtons\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header.tsx\");reactHotLoader.register(Header, \"Header\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header.tsx"],"names":[],"mappings":"kjBAAA;;;;;;;;;;;;;;;;;AAiBG;AACH;AACA,SAAS,MAAT,EAAiB,CAAjB,QAA0B,mBAA1B;AACA,OAAO,KAAP,MAA0B,OAA1B;AACA,OAAO,IAAP,MAAiB,qBAAjB;AACA,OAAO,MAAP,MAAmB,uBAAnB;AACA,SAAS,WAAT,QAA4B,aAA5B;AACA,SAAS,cAAT,QAA+B,sBAA/B;AAEA,OAAO,uBAAP,MAAoC,2BAApC;AACA,SAAS,UAAT,QAA2B,SAA3B,C;AAGA,MAAM,SAAS,GAAG,MAAM,CAAC,EAAE;;;;;aAKd,CAAC,EAAE,KAAF,EAAD,KAAe,KAAK,CAAC,QAAN,GAAiB,CAAC;;;;;AAK7C,CAVD;AAYA,MAAM,aAAa,GAAG,MAAM,CAAC,GAAG;;;;;;;IAO5B,CAAC,EAAE,KAAF,EAAD,KACA,cAAc,KAAK,CAAC,QAAN,GAAiB,CAAC,MAAM,KAAK,CAAC,QAAN,GAAiB,CAAC,IAAI;;;;;AAK/D,CAbD;AAwBA,MAAM,MAAM,GAAoB,CAAC,EAC/B,OAD+B,EAE/B,eAF+B,EAG/B,gBAH+B,EAI/B,eAJ+B,EAK/B,mBAL+B,EAM/B,gBAN+B,EAAD,KAO3B;AACH,QAAM,OAAO,GAAG,UAAU,EAA1B;AACA,QAAM,YAAY,GAAG,eAAsB,OAAtB,CAArB;AACA,QAAM,OAAO,GAAG,WAAW,CACzB,CAAC,EAAE,aAAF,EAAD,KAAuB,aAAa,CAAC,cADZ,CAA3B;AAIA,QAAM,cAAc,GAAG,MAAK;AAC1B,6BAAA,YAAY,MAAZ,CAAA,YAAY,EAAS,MAAM,IAAG;AAC5B,MAAA,mBAAmB,CAAC,KAAK,IAAG;AAC1B,QAAA,KAAK,CAAC,MAAM,CAAC,EAAR,CAAL,GAAmB,cAAc,CAAC,MAAM,CAAC,EAAR,CAAjC;AACD,OAFkB,CAAnB;AAGD,KAJW,CAAZ;AAKD,GAND;AAQA,QAAM,kBAAkB,GAAG,iDAAc,eAAd,kBACzB,MAAM,oFACJ,0BAAA,gBAAgB,CAAC,MAAM,CAAC,EAAR,CAAhB,qEAA6B,YAA7B,4CAA2C,KAA3C,MAAqD,IAArD;AACC,KAAC,gBAAgB,CAAC,MAAM,CAAC,EAAR,CAAjB,IAAgC,yBAAA,MAAM,CAAC,YAAP,0CAAqB,KAArB,MAA+B,IAF5D,EADmB,CAA3B;AAMA,SACE;AACE,gBAAC,SAAD;AACE,8BAAO,CAAC,CAAC,SAAD,CAAR,CADF;AAEG,EAAA,OAAO,IACN,cAAC,uBAAD,IAAyB,eAAe,EAAE,YAAY,CAAC,MAAb,KAAwB,CAAlE;AACE,gBAAC,IAAD,IAAM,IAAI,EAAC,MAAX,EAAkB,aAAU,eAA5B,GADF,CAHJ;;AAOE,gBAAC,IAAD,IAAM,IAAI,EAAC,QAAX,EAAoB,OAAO,EAAE,MAAM,gBAAgB,CAAC,KAAD,CAAnD,GAPF,CADF;;AAUE,gBAAC,aAAD;AACE,gBAAC,MAAD,IACE,QAAQ,EAAE,kBADZ,EAEE,WAAW,EAAC,UAFd,EAGE,UAAU,EAAC,OAHb,EAIE,OAAO,EAAE,cAJX,EAKE,aAAU,qBALZ;AAOG,EAAA,CAAC,CAAC,WAAD,CAPJ,CADF;;AAUE,gBAAC,MAAD,IACE,QAAQ,EAAE,eADZ,EAEE,WAAW,EAAC,SAFd,EAGE,QAAQ,EAAC,QAHX,EAIE,UAAU,EAAC,OAJb,EAKE,OAAO,EAAE,OALX,EAME,aAAU,qBANZ;AAQG,EAAA,CAAC,CAAC,OAAD,CARJ,CAVF,CAVF,CADF;;;;AAkCD,CA9DD,C,cAAM,M,sDAQY,U,EAEA,W;AAsDH,M,CAAf,wB,iLApGM,S,6HAYA,a,iIAwBA,M","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { styled, t } from '@superset-ui/core';\nimport React, { FC } from 'react';\nimport Icon from 'src/components/Icon';\nimport Button from 'src/components/Button';\nimport { useSelector } from 'react-redux';\nimport { getInitialMask } from 'src/dataMask/reducer';\nimport { DataMaskUnit, DataMaskUnitWithId } from 'src/dataMask/types';\nimport FilterConfigurationLink from './FilterConfigurationLink';\nimport { useFilters } from './state';\nimport { Filter } from '../types';\n\nconst TitleArea = styled.h4`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 0;\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n\n  & > span {\n    flex-grow: 1;\n  }\n`;\n\nconst ActionButtons = styled.div`\n  display: grid;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 10px;\n  grid-template-columns: 1fr 1fr;\n  ${({ theme }) =>\n    `padding: 0 ${theme.gridUnit * 2}px ${theme.gridUnit * 2}px`};\n\n  .btn {\n    flex: 1;\n  }\n`;\n\ntype HeaderProps = {\n  toggleFiltersBar: (arg0: boolean) => void;\n  onApply: () => void;\n  setDataMaskSelected: (arg0: (draft: DataMaskUnit) => void) => void;\n  dataMaskSelected: DataMaskUnit;\n  dataMaskApplied: DataMaskUnitWithId;\n  isApplyDisabled: boolean;\n};\n\nconst Header: FC<HeaderProps> = ({\n  onApply,\n  isApplyDisabled,\n  dataMaskSelected,\n  dataMaskApplied,\n  setDataMaskSelected,\n  toggleFiltersBar,\n}) => {\n  const filters = useFilters();\n  const filterValues = Object.values<Filter>(filters);\n  const canEdit = useSelector<any, boolean>(\n    ({ dashboardInfo }) => dashboardInfo.dash_edit_perm,\n  );\n\n  const handleClearAll = () => {\n    filterValues.forEach(filter => {\n      setDataMaskSelected(draft => {\n        draft[filter.id] = getInitialMask(filter.id);\n      });\n    });\n  };\n\n  const isClearAllDisabled = Object.values(dataMaskApplied).every(\n    filter =>\n      dataMaskSelected[filter.id]?.currentState?.value === null ||\n      (!dataMaskSelected[filter.id] && filter.currentState?.value === null),\n  );\n\n  return (\n    <>\n      <TitleArea>\n        <span>{t('Filters')}</span>\n        {canEdit && (\n          <FilterConfigurationLink createNewOnOpen={filterValues.length === 0}>\n            <Icon name=\"edit\" data-test=\"create-filter\" />\n          </FilterConfigurationLink>\n        )}\n        <Icon name=\"expand\" onClick={() => toggleFiltersBar(false)} />\n      </TitleArea>\n      <ActionButtons>\n        <Button\n          disabled={isClearAllDisabled}\n          buttonStyle=\"tertiary\"\n          buttonSize=\"small\"\n          onClick={handleClearAll}\n          data-test=\"filter-reset-button\"\n        >\n          {t('Clear all')}\n        </Button>\n        <Button\n          disabled={isApplyDisabled}\n          buttonStyle=\"primary\"\n          htmlType=\"submit\"\n          buttonSize=\"small\"\n          onClick={onApply}\n          data-test=\"filter-apply-button\"\n        >\n          {t('Apply')}\n        </Button>\n      </ActionButtons>\n    </>\n  );\n};\n\nexport default Header;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}