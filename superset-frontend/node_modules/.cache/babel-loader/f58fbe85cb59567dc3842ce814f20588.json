{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, Behavior } from '@superset-ui/core';\nimport React, { useState, useEffect } from 'react';\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\nimport { Styles } from '../common';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst DEFAULT_VALUE = 'Last week';\nconst TimeFilterStyles = styled(Styles)`\n  overflow-x: scroll;\n`;\nexport default function TimeFilterPlugin(props) {\n  const { formData, setDataMask, width, behaviors } = props;\n  const { defaultValue, currentValue } = formData;\n  const [value, setValue] = useState(defaultValue != null ? defaultValue : DEFAULT_VALUE);\n  const handleTimeRangeChange = timeRange => {\n    setValue(timeRange);\n    const dataMask = {\n      extraFormData: {\n        override_form_data: {\n          time_range: timeRange } },\n\n\n      currentState: { value: timeRange } };\n\n    const dataMaskObject = {};\n    if (_includesInstanceProperty(behaviors).call(behaviors, Behavior.NATIVE_FILTER)) {\n      dataMaskObject.nativeFilters = dataMask;\n    }\n    if (_includesInstanceProperty(behaviors).call(behaviors, Behavior.CROSS_FILTER)) {\n      dataMaskObject.crossFilters = dataMask;\n    }\n    setDataMask(dataMaskObject);\n  };\n  useEffect(() => {\n    handleTimeRangeChange(currentValue != null ? currentValue : DEFAULT_VALUE);\n  }, [currentValue]);\n  useEffect(() => {\n    handleTimeRangeChange(defaultValue != null ? defaultValue : DEFAULT_VALUE);\n  }, [defaultValue]);\n  return (\n    // @ts-ignore\n    ___EmotionJSX(TimeFilterStyles, { width: width },\n    ___EmotionJSX(DateFilterControl, { value: value, name: \"time_range\", onChange: handleTimeRangeChange })));\n\n}__signature__(TimeFilterPlugin, \"useState{[value, setValue](defaultValue ?? DEFAULT_VALUE)}\\nuseEffect{}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DEFAULT_VALUE, \"DEFAULT_VALUE\", \"/app/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");reactHotLoader.register(TimeFilterStyles, \"TimeFilterStyles\", \"/app/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");reactHotLoader.register(TimeFilterPlugin, \"TimeFilterPlugin\", \"/app/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx"],"names":[],"mappings":"icAAA;;;;;;;;;;;;;;;;;AAiBG;AACH,SAAS,MAAT,EAA2B,QAA3B,QAA2C,mBAA3C;AACA,OAAO,KAAP,IAAgB,QAAhB,EAA0B,SAA1B,QAA2C,OAA3C;AACA,OAAO,iBAAP,MAA8B,mDAA9B;AAEA,SAAS,MAAT,QAAuB,WAAvB,C;AAEA,MAAM,aAAa,GAAG,WAAtB;AAEA,MAAM,gBAAgB,GAAG,MAAM,CAAC,MAAD,CAAQ;;AAEtC,CAFD;AAIA,eAAc,SAAU,gBAAV,CAA2B,KAA3B,EAAuD;AACnE,QAAM,EAAE,QAAF,EAAY,WAAZ,EAAyB,KAAzB,EAAgC,SAAhC,KAA8C,KAApD;AACA,QAAM,EAAE,YAAF,EAAgB,YAAhB,KAAiC,QAAvC;AAEA,QAAM,CAAC,KAAD,EAAQ,QAAR,IAAoB,QAAQ,CAAS,YAAT,WAAS,YAAT,GAAyB,aAAzB,CAAlC;AAEA,QAAM,qBAAqB,GAAI,SAAD,IAA4B;AACxD,IAAA,QAAQ,CAAC,SAAD,CAAR;AACA,UAAM,QAAQ,GAAG;AACf,MAAA,aAAa,EAAE;AACb,QAAA,kBAAkB,EAAE;AAClB,UAAA,UAAU,EAAE,SADM,EADP,EADA;;;AAMf,MAAA,YAAY,EAAE,EAAE,KAAK,EAAE,SAAT,EANC,EAAjB;;AASA,UAAM,cAAc,GAAa,EAAjC;AACA,QAAI,0BAAA,SAAS,MAAT,CAAA,SAAS,EAAU,QAAQ,CAAC,aAAnB,CAAb,EAAgD;AAC9C,MAAA,cAAc,CAAC,aAAf,GAA+B,QAA/B;AACD;AAED,QAAI,0BAAA,SAAS,MAAT,CAAA,SAAS,EAAU,QAAQ,CAAC,YAAnB,CAAb,EAA+C;AAC7C,MAAA,cAAc,CAAC,YAAf,GAA8B,QAA9B;AACD;AAED,IAAA,WAAW,CAAC,cAAD,CAAX;AACD,GArBD;AAuBA,EAAA,SAAS,CAAC,MAAK;AACb,IAAA,qBAAqB,CAAC,YAAD,WAAC,YAAD,GAAiB,aAAjB,CAArB;AACD,GAFQ,EAEN,CAAC,YAAD,CAFM,CAAT;AAIA,EAAA,SAAS,CAAC,MAAK;AACb,IAAA,qBAAqB,CAAC,YAAD,WAAC,YAAD,GAAiB,aAAjB,CAArB;AACD,GAFQ,EAEN,CAAC,YAAD,CAFM,CAAT;AAIA;AACE;AACA,kBAAC,gBAAD,IAAkB,KAAK,EAAE,KAAzB;AACE,kBAAC,iBAAD,IACE,KAAK,EAAE,KADT,EAEE,IAAI,EAAC,YAFP,EAGE,QAAQ,EAAE,qBAHZ,GADF,CAFF;;AAUD,C,cA/CuB,gB,2QANlB,a,sHAEA,gB,yHAIkB,gB","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, DataMask, Behavior } from '@superset-ui/core';\nimport React, { useState, useEffect } from 'react';\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\nimport { PluginFilterTimeProps } from './types';\nimport { Styles } from '../common';\n\nconst DEFAULT_VALUE = 'Last week';\n\nconst TimeFilterStyles = styled(Styles)`\n  overflow-x: scroll;\n`;\n\nexport default function TimeFilterPlugin(props: PluginFilterTimeProps) {\n  const { formData, setDataMask, width, behaviors } = props;\n  const { defaultValue, currentValue } = formData;\n\n  const [value, setValue] = useState<string>(defaultValue ?? DEFAULT_VALUE);\n\n  const handleTimeRangeChange = (timeRange: string): void => {\n    setValue(timeRange);\n    const dataMask = {\n      extraFormData: {\n        override_form_data: {\n          time_range: timeRange,\n        },\n      },\n      currentState: { value: timeRange },\n    };\n\n    const dataMaskObject: DataMask = {};\n    if (behaviors.includes(Behavior.NATIVE_FILTER)) {\n      dataMaskObject.nativeFilters = dataMask;\n    }\n\n    if (behaviors.includes(Behavior.CROSS_FILTER)) {\n      dataMaskObject.crossFilters = dataMask;\n    }\n\n    setDataMask(dataMaskObject);\n  };\n\n  useEffect(() => {\n    handleTimeRangeChange(currentValue ?? DEFAULT_VALUE);\n  }, [currentValue]);\n\n  useEffect(() => {\n    handleTimeRangeChange(defaultValue ?? DEFAULT_VALUE);\n  }, [defaultValue]);\n\n  return (\n    // @ts-ignore\n    <TimeFilterStyles width={width}>\n      <DateFilterControl\n        value={value}\n        name=\"time_range\"\n        onChange={handleTimeRangeChange}\n      />\n    </TimeFilterStyles>\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}