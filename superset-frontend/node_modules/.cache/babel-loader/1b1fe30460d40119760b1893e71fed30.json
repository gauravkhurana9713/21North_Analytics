{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport { Nav, Navbar, NavItem } from 'react-bootstrap';\nimport NavDropdown from 'src/components/NavDropdown';\nimport { Menu as DropdownMenu } from 'src/common/components';\nimport { Link } from 'react-router-dom';\nimport MenuObject from './MenuObject';\nimport LanguagePicker from './LanguagePicker';\nimport NewMenu from './NewMenu';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst StyledHeader = styled.header`\n  &:nth-last-of-type(2) nav {\n    margin-bottom: 2px;\n  }\n\n  .caret {\n    display: none;\n  }\n\n  .navbar-inverse {\n    border: none;\n  }\n\n  .version-info {\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 4}px\n      ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 7}px;\n    color: ${({ theme }) => theme.colors.grayscale.base};\n    font-size: ${({ theme }) => theme.typography.sizes.xs}px;\n\n    div {\n      white-space: nowrap;\n    }\n  }\n\n  .navbar-brand {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  .nav > li > a {\n    padding: ${({ theme }) => theme.gridUnit * 4}px;\n  }\n  .dropdown-header {\n    text-transform: uppercase;\n    padding-left: 12px;\n  }\n\n  .navbar-inverse .navbar-nav li a {\n    color: ${({ theme }) => theme.colors.grayscale.dark1};\n    border-bottom: none;\n    transition: background-color ${({ theme }) => theme.transitionTiming}s;\n    &:after {\n      content: '';\n      position: absolute;\n      bottom: -3px;\n      left: 50%;\n      width: 0;\n      height: 3px;\n      opacity: 0;\n      transform: translateX(-50%);\n      transition: all ${({ theme }) => theme.transitionTiming}s;\n      background-color: ${({ theme }) => theme.colors.primary.base};\n    }\n    &:focus {\n      border-bottom: none;\n      background-color: transparent;\n      /* background-color: ${({ theme }) => theme.colors.primary.light5}; */\n    }\n    &:hover {\n      color: ${({ theme }) => theme.colors.grayscale.dark1};\n      background-color: ${({ theme }) => theme.colors.primary.light5};\n      border-bottom: none;\n      margin: 0;\n      &:after {\n        opacity: 1;\n        width: 100%;\n      }\n    }\n  }\n\n  .navbar-right {\n    display: flex;\n    align-items: center;\n  }\n\n  .ant-menu {\n    .ant-menu-item-group-title {\n      padding-bottom: ${({ theme }) => theme.gridUnit}px;\n    }\n    .ant-menu-item {\n      margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n    .about-section {\n      margin: ${({ theme }) => theme.gridUnit}px 0\n        ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n`;\nexport function Menu({ data: { menu, brand, navbar_right: navbarRight, settings }, isFrontendRoute = () => false }) {\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n  return ___EmotionJSX(StyledHeader, { className: \"top\", id: \"main-menu\" },\n  ___EmotionJSX(Navbar, { inverse: true, fluid: true, staticTop: true, role: \"navigation\" },\n  ___EmotionJSX(Navbar.Header, null,\n  ___EmotionJSX(Navbar.Brand, null,\n  ___EmotionJSX(\"a\", { className: \"navbar-brand\", href: brand.path },\n  ___EmotionJSX(\"img\", { width: brand.width, src: brand.icon, alt: brand.alt }))),\n\n\n  ___EmotionJSX(Navbar.Toggle, null)),\n\n  ___EmotionJSX(Nav, { \"data-test\": \"navbar-top\" },\n  _mapInstanceProperty(menu).call(menu, (item, index) => {var _item$childs;\n    const props = {\n      ...item,\n      isFrontendRoute: isFrontendRoute(item.url),\n      childs: (_item$childs = item.childs) == null ? void 0 : _mapInstanceProperty(_item$childs).call(_item$childs, c => {\n        if (typeof c === 'string') {\n          return c;\n        }\n        return {\n          ...c,\n          isFrontendRoute: isFrontendRoute(c.url) };\n\n      }) };\n\n    return ___EmotionJSX(MenuObject, _extends({}, props, { key: item.label, index: index + 1 }));\n  })),\n\n  ___EmotionJSX(Nav, { className: \"navbar-right\" },\n  !navbarRight.user_is_anonymous && ___EmotionJSX(NewMenu, null),\n  ___EmotionJSX(NavDropdown, { id: \"settings-dropdown\", title: t('Settings'), onMouseEnter: () => setDropdownOpen(true), onMouseLeave: () => setDropdownOpen(false), onToggle: value => setDropdownOpen(value), open: dropdownOpen },\n  ___EmotionJSX(DropdownMenu, null,\n  _mapInstanceProperty(settings).call(settings, (section, index) => {var _section$childs;return [\n    ___EmotionJSX(DropdownMenu.ItemGroup, { key: `${section.label}`, title: section.label }, (_section$childs =\n    section.childs) == null ? void 0 : _mapInstanceProperty(_section$childs).call(_section$childs, child => {\n      if (typeof child !== 'string') {\n        return ___EmotionJSX(DropdownMenu.Item, { key: `${child.label}` },\n        isFrontendRoute(child.url) ? ___EmotionJSX(Link, { to: child.url || '' }, child.label) : ___EmotionJSX(\"a\", { href: child.url }, child.label));\n\n      }\n      return null;\n    })),\n\n    index < settings.length - 1 && ___EmotionJSX(DropdownMenu.Divider, null)];}),\n\n\n  !navbarRight.user_is_anonymous && [\n  ___EmotionJSX(DropdownMenu.Divider, { key: \"user-divider\" }),\n  ___EmotionJSX(DropdownMenu.ItemGroup, { key: \"user-section\", title: t('User') },\n  navbarRight.user_profile_url && ___EmotionJSX(DropdownMenu.Item, { key: \"profile\" },\n  ___EmotionJSX(\"a\", { href: navbarRight.user_profile_url }, t('Profile'))),\n\n  ___EmotionJSX(DropdownMenu.Item, { key: \"info\" },\n  ___EmotionJSX(\"a\", { href: navbarRight.user_info_url }, t('Info'))),\n\n  ___EmotionJSX(DropdownMenu.Item, { key: \"logout\" },\n  ___EmotionJSX(\"a\", { href: navbarRight.user_logout_url }, t('Logout'))))],\n\n\n\n  (navbarRight.version_string || navbarRight.version_sha) && [\n  ___EmotionJSX(DropdownMenu.Divider, { key: \"version-info-divider\" }),\n  ___EmotionJSX(DropdownMenu.ItemGroup, { key: \"about-section\", title: t('About') },\n  ___EmotionJSX(\"div\", { className: \"about-section\" },\n  navbarRight.version_string && ___EmotionJSX(\"li\", { className: \"version-info\" },\n  ___EmotionJSX(\"span\", null, \"Version: \", navbarRight.version_string)),\n\n  navbarRight.version_sha && ___EmotionJSX(\"li\", { className: \"version-info\" },\n  ___EmotionJSX(\"span\", null, \"SHA: \", navbarRight.version_sha))))])),\n\n\n\n\n\n\n  navbarRight.documentation_url && ___EmotionJSX(NavItem, { href: navbarRight.documentation_url, target: \"_blank\", title: \"Documentation\" },\n  ___EmotionJSX(\"i\", { className: \"fa fa-question\" }), \"\\xA0\"),\n\n\n  navbarRight.bug_report_url && ___EmotionJSX(NavItem, { href: navbarRight.bug_report_url, target: \"_blank\", title: \"Report a Bug\" },\n  ___EmotionJSX(\"i\", { className: \"fa fa-bug\" }), \"\\xA0\"),\n\n\n  navbarRight.show_language_picker && ___EmotionJSX(LanguagePicker, { locale: navbarRight.locale, languages: navbarRight.languages }),\n  navbarRight.user_is_anonymous && ___EmotionJSX(NavItem, { href: navbarRight.user_login_url },\n  ___EmotionJSX(\"i\", { className: \"fa fa-fw fa-sign-in\" }),\n  t('Login')))));\n\n\n\n\n}\n// transform the menu data to reorganize components\n__signature__(Menu, \"useState{[dropdownOpen, setDropdownOpen](false)}\");export default function MenuWrapper({ data, ...rest }) {var _context;\n  const newMenuData = {\n    ...data };\n\n  // Menu items that should go into settings dropdown\n  const settingsMenus = {\n    Security: true,\n    Manage: true };\n\n  // Cycle through menu.menu to build out cleanedMenu and settings\n  const cleanedMenu = [];\n  const settings = [];\n  _forEachInstanceProperty(_context = newMenuData.menu).call(_context, item => {\n    if (!item) {\n      return;\n    }\n    const children = [];\n    const newItem = {\n      ...item };\n\n    // Filter childs\n    if (item.childs) {var _context2;\n      _forEachInstanceProperty(_context2 = item.childs).call(_context2, child => {\n        if (typeof child === 'string') {\n          children.push(child);\n        } else\n        if (child.label) {\n          children.push(child);\n        }\n      });\n      newItem.childs = children;\n    }\n    if (!settingsMenus.hasOwnProperty(item.name)) {\n      cleanedMenu.push(newItem);\n    } else\n    {\n      settings.push(newItem);\n    }\n  });\n  newMenuData.menu = cleanedMenu;\n  newMenuData.settings = settings;\n  return ___EmotionJSX(Menu, _extends({ data: newMenuData }, rest));\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledHeader, \"StyledHeader\", \"/app/superset-frontend/src/components/Menu/Menu.tsx\");reactHotLoader.register(Menu, \"Menu\", \"/app/superset-frontend/src/components/Menu/Menu.tsx\");reactHotLoader.register(MenuWrapper, \"MenuWrapper\", \"/app/superset-frontend/src/components/Menu/Menu.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/components/Menu/Menu.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport { Nav, Navbar, NavItem } from 'react-bootstrap';\nimport NavDropdown from 'src/components/NavDropdown';\nimport { Menu as DropdownMenu } from 'src/common/components';\nimport { Link } from 'react-router-dom';\nimport MenuObject, {\n  MenuObjectProps,\n  MenuObjectChildProps,\n} from './MenuObject';\nimport LanguagePicker, { Languages } from './LanguagePicker';\nimport NewMenu from './NewMenu';\n\ninterface BrandProps {\n  path: string;\n  icon: string;\n  alt: string;\n  width: string | number;\n}\n\ninterface NavBarProps {\n  bug_report_url?: string;\n  version_string?: string;\n  version_sha?: string;\n  documentation_url?: string;\n  languages: Languages;\n  show_language_picker: boolean;\n  user_is_anonymous: boolean;\n  user_info_url: string;\n  user_login_url: string;\n  user_logout_url: string;\n  user_profile_url: string | null;\n  locale: string;\n}\n\nexport interface MenuProps {\n  data: {\n    menu: MenuObjectProps[];\n    brand: BrandProps;\n    navbar_right: NavBarProps;\n    settings: MenuObjectProps[];\n  };\n  isFrontendRoute?: (path?: string) => boolean;\n}\n\nconst StyledHeader = styled.header`\n  &:nth-last-of-type(2) nav {\n    margin-bottom: 2px;\n  }\n\n  .caret {\n    display: none;\n  }\n\n  .navbar-inverse {\n    border: none;\n  }\n\n  .version-info {\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 4}px\n      ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 7}px;\n    color: ${({ theme }) => theme.colors.grayscale.base};\n    font-size: ${({ theme }) => theme.typography.sizes.xs}px;\n\n    div {\n      white-space: nowrap;\n    }\n  }\n\n  .navbar-brand {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  .nav > li > a {\n    padding: ${({ theme }) => theme.gridUnit * 4}px;\n  }\n  .dropdown-header {\n    text-transform: uppercase;\n    padding-left: 12px;\n  }\n\n  .navbar-inverse .navbar-nav li a {\n    color: ${({ theme }) => theme.colors.grayscale.dark1};\n    border-bottom: none;\n    transition: background-color ${({ theme }) => theme.transitionTiming}s;\n    &:after {\n      content: '';\n      position: absolute;\n      bottom: -3px;\n      left: 50%;\n      width: 0;\n      height: 3px;\n      opacity: 0;\n      transform: translateX(-50%);\n      transition: all ${({ theme }) => theme.transitionTiming}s;\n      background-color: ${({ theme }) => theme.colors.primary.base};\n    }\n    &:focus {\n      border-bottom: none;\n      background-color: transparent;\n      /* background-color: ${({ theme }) => theme.colors.primary.light5}; */\n    }\n    &:hover {\n      color: ${({ theme }) => theme.colors.grayscale.dark1};\n      background-color: ${({ theme }) => theme.colors.primary.light5};\n      border-bottom: none;\n      margin: 0;\n      &:after {\n        opacity: 1;\n        width: 100%;\n      }\n    }\n  }\n\n  .navbar-right {\n    display: flex;\n    align-items: center;\n  }\n\n  .ant-menu {\n    .ant-menu-item-group-title {\n      padding-bottom: ${({ theme }) => theme.gridUnit}px;\n    }\n    .ant-menu-item {\n      margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n    .about-section {\n      margin: ${({ theme }) => theme.gridUnit}px 0\n        ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n`;\n\nexport function Menu({\n  data: { menu, brand, navbar_right: navbarRight, settings },\n  isFrontendRoute = () => false,\n}: MenuProps) {\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n\n  return (\n    <StyledHeader className=\"top\" id=\"main-menu\">\n      <Navbar inverse fluid staticTop role=\"navigation\">\n        <Navbar.Header>\n          <Navbar.Brand>\n            <a className=\"navbar-brand\" href={brand.path}>\n              <img width={brand.width} src={brand.icon} alt={brand.alt} />\n            </a>\n          </Navbar.Brand>\n          <Navbar.Toggle />\n        </Navbar.Header>\n        <Nav data-test=\"navbar-top\">\n          {menu.map((item, index) => {\n            const props = {\n              ...item,\n              isFrontendRoute: isFrontendRoute(item.url),\n              childs: item.childs?.map(c => {\n                if (typeof c === 'string') {\n                  return c;\n                }\n\n                return {\n                  ...c,\n                  isFrontendRoute: isFrontendRoute(c.url),\n                };\n              }),\n            };\n            return <MenuObject {...props} key={item.label} index={index + 1} />;\n          })}\n        </Nav>\n        <Nav className=\"navbar-right\">\n          {!navbarRight.user_is_anonymous && <NewMenu />}\n          <NavDropdown\n            id=\"settings-dropdown\"\n            title={t('Settings')}\n            onMouseEnter={() => setDropdownOpen(true)}\n            onMouseLeave={() => setDropdownOpen(false)}\n            onToggle={value => setDropdownOpen(value)}\n            open={dropdownOpen}\n          >\n            <DropdownMenu>\n              {settings.map((section, index) => [\n                <DropdownMenu.ItemGroup\n                  key={`${section.label}`}\n                  title={section.label}\n                >\n                  {section.childs?.map(child => {\n                    if (typeof child !== 'string') {\n                      return (\n                        <DropdownMenu.Item key={`${child.label}`}>\n                          {isFrontendRoute(child.url) ? (\n                            <Link to={child.url || ''}>{child.label}</Link>\n                          ) : (\n                            <a href={child.url}>{child.label}</a>\n                          )}\n                        </DropdownMenu.Item>\n                      );\n                    }\n                    return null;\n                  })}\n                </DropdownMenu.ItemGroup>,\n                index < settings.length - 1 && <DropdownMenu.Divider />,\n              ])}\n\n              {!navbarRight.user_is_anonymous && [\n                <DropdownMenu.Divider key=\"user-divider\" />,\n                <DropdownMenu.ItemGroup key=\"user-section\" title={t('User')}>\n                  {navbarRight.user_profile_url && (\n                    <DropdownMenu.Item key=\"profile\">\n                      <a href={navbarRight.user_profile_url}>{t('Profile')}</a>\n                    </DropdownMenu.Item>\n                  )}\n                  <DropdownMenu.Item key=\"info\">\n                    <a href={navbarRight.user_info_url}>{t('Info')}</a>\n                  </DropdownMenu.Item>\n                  <DropdownMenu.Item key=\"logout\">\n                    <a href={navbarRight.user_logout_url}>{t('Logout')}</a>\n                  </DropdownMenu.Item>\n                </DropdownMenu.ItemGroup>,\n              ]}\n              {(navbarRight.version_string || navbarRight.version_sha) && [\n                <DropdownMenu.Divider key=\"version-info-divider\" />,\n                <DropdownMenu.ItemGroup key=\"about-section\" title={t('About')}>\n                  <div className=\"about-section\">\n                    {navbarRight.version_string && (\n                      <li className=\"version-info\">\n                        <span>Version: {navbarRight.version_string}</span>\n                      </li>\n                    )}\n                    {navbarRight.version_sha && (\n                      <li className=\"version-info\">\n                        <span>SHA: {navbarRight.version_sha}</span>\n                      </li>\n                    )}\n                  </div>\n                </DropdownMenu.ItemGroup>,\n              ]}\n            </DropdownMenu>\n          </NavDropdown>\n          {navbarRight.documentation_url && (\n            <NavItem\n              href={navbarRight.documentation_url}\n              target=\"_blank\"\n              title=\"Documentation\"\n            >\n              <i className=\"fa fa-question\" />\n              &nbsp;\n            </NavItem>\n          )}\n          {navbarRight.bug_report_url && (\n            <NavItem\n              href={navbarRight.bug_report_url}\n              target=\"_blank\"\n              title=\"Report a Bug\"\n            >\n              <i className=\"fa fa-bug\" />\n              &nbsp;\n            </NavItem>\n          )}\n          {navbarRight.show_language_picker && (\n            <LanguagePicker\n              locale={navbarRight.locale}\n              languages={navbarRight.languages}\n            />\n          )}\n          {navbarRight.user_is_anonymous && (\n            <NavItem href={navbarRight.user_login_url}>\n              <i className=\"fa fa-fw fa-sign-in\" />\n              {t('Login')}\n            </NavItem>\n          )}\n        </Nav>\n      </Navbar>\n    </StyledHeader>\n  );\n}\n\n// transform the menu data to reorganize components\nexport default function MenuWrapper({ data, ...rest }: MenuProps) {\n  const newMenuData = {\n    ...data,\n  };\n  // Menu items that should go into settings dropdown\n  const settingsMenus = {\n    Security: true,\n    Manage: true,\n  };\n\n  // Cycle through menu.menu to build out cleanedMenu and settings\n  const cleanedMenu: MenuObjectProps[] = [];\n  const settings: MenuObjectProps[] = [];\n  newMenuData.menu.forEach((item: any) => {\n    if (!item) {\n      return;\n    }\n\n    const children: (MenuObjectProps | string)[] = [];\n    const newItem = {\n      ...item,\n    };\n\n    // Filter childs\n    if (item.childs) {\n      item.childs.forEach((child: MenuObjectChildProps | string) => {\n        if (typeof child === 'string') {\n          children.push(child);\n        } else if ((child as MenuObjectChildProps).label) {\n          children.push(child);\n        }\n      });\n\n      newItem.childs = children;\n    }\n\n    if (!settingsMenus.hasOwnProperty(item.name)) {\n      cleanedMenu.push(newItem);\n    } else {\n      settings.push(newItem);\n    }\n  });\n\n  newMenuData.menu = cleanedMenu;\n  newMenuData.settings = settings;\n\n  return <Menu data={newMenuData} {...rest} />;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}