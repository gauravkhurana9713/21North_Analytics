{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _sortInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/sort\";import _sliceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/slice\";import _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";import _Object$entries from \"@babel/runtime-corejs3/core-js-stable/object/entries\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Well } from 'react-bootstrap';\nimport Collapse from 'src/common/components/Collapse';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport shortid from 'shortid';\nimport { t, styled } from '@superset-ui/core';\n\n\nimport Fade from 'src/common/components/Fade';\nimport { Tooltip } from 'src/common/components/Tooltip';\nimport CopyToClipboard from '../../components/CopyToClipboard';\nimport { IconTooltip } from '../../components/IconTooltip';\nimport ColumnElement from './ColumnElement';\nimport ShowSQL from './ShowSQL';\nimport ModalTrigger from '../../components/ModalTrigger';\nimport Loading from '../../components/Loading';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  table: PropTypes.object,\n  actions: PropTypes.object };\n\n\nconst defaultProps = {\n  actions: {},\n  table: null };\n\n\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &: hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;var _ref = process.env.NODE_ENV === \"production\" ? { name: \"328b6z-TableElement\", styles: \"padding-top:6px;;label:TableElement;\" } : { name: \"328b6z-TableElement\", styles: \"padding-top:6px;;label:TableElement;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9hcHAvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1RhYmxlRWxlbWVudC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMlFRIiwiZmlsZSI6Ii9hcHAvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1RhYmxlRWxlbWVudC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IFdlbGwgfSBmcm9tICdyZWFjdC1ib290c3RyYXAnO1xuaW1wb3J0IENvbGxhcHNlIGZyb20gJ3NyYy9jb21tb24vY29tcG9uZW50cy9Db2xsYXBzZSc7XG5pbXBvcnQgQnV0dG9uR3JvdXAgZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uR3JvdXAnO1xuaW1wb3J0IHNob3J0aWQgZnJvbSAnc2hvcnRpZCc7XG5pbXBvcnQgeyB0LCBzdHlsZWQgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCBGYWRlIGZyb20gJ3NyYy9jb21tb24vY29tcG9uZW50cy9GYWRlJztcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdzcmMvY29tbW9uL2NvbXBvbmVudHMvVG9vbHRpcCc7XG5pbXBvcnQgQ29weVRvQ2xpcGJvYXJkIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQ29weVRvQ2xpcGJvYXJkJztcbmltcG9ydCB7IEljb25Ub29sdGlwIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9JY29uVG9vbHRpcCc7XG5pbXBvcnQgQ29sdW1uRWxlbWVudCBmcm9tICcuL0NvbHVtbkVsZW1lbnQnO1xuaW1wb3J0IFNob3dTUUwgZnJvbSAnLi9TaG93U1FMJztcbmltcG9ydCBNb2RhbFRyaWdnZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Nb2RhbFRyaWdnZXInO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Mb2FkaW5nJztcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICB0YWJsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgYWN0aW9uczogUHJvcFR5cGVzLm9iamVjdCxcbn07XG5cbmNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgYWN0aW9uczoge30sXG4gIHRhYmxlOiBudWxsLFxufTtcblxuY29uc3QgU3R5bGVkU3BhbiA9IHN0eWxlZC5zcGFuYFxuICBjb2xvcjogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMX07XG4gICY6IGhvdmVyIHtcbiAgICBjb2xvcjogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMn07XG4gIH1cbiAgY3Vyc29yOiBwb2ludGVyO1xuYDtcblxuY2xhc3MgVGFibGVFbGVtZW50IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzb3J0Q29sdW1uczogZmFsc2UsXG4gICAgICBob3ZlcmVkOiBmYWxzZSxcbiAgICB9O1xuICAgIHRoaXMudG9nZ2xlU29ydENvbHVtbnMgPSB0aGlzLnRvZ2dsZVNvcnRDb2x1bW5zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW1vdmVUYWJsZSA9IHRoaXMucmVtb3ZlVGFibGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEhvdmVyID0gZGVib3VuY2UodGhpcy5zZXRIb3Zlci5iaW5kKHRoaXMpLCAxMDApO1xuICB9XG5cbiAgc2V0SG92ZXIoaG92ZXJlZCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlcmVkIH0pO1xuICB9XG5cbiAgcG9wU2VsZWN0U3RhcigpIHtcbiAgICBjb25zdCBxZSA9IHtcbiAgICAgIGlkOiBzaG9ydGlkLmdlbmVyYXRlKCksXG4gICAgICB0aXRsZTogdGhpcy5wcm9wcy50YWJsZS5uYW1lLFxuICAgICAgZGJJZDogdGhpcy5wcm9wcy50YWJsZS5kYklkLFxuICAgICAgYXV0b3J1bjogdHJ1ZSxcbiAgICAgIHNxbDogdGhpcy5wcm9wcy50YWJsZS5zZWxlY3RTdGFyLFxuICAgIH07XG4gICAgdGhpcy5wcm9wcy5hY3Rpb25zLmFkZFF1ZXJ5RWRpdG9yKHFlKTtcbiAgfVxuXG4gIHRvZ2dsZVRhYmxlKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHRoaXMucHJvcHMudGFibGUuZXhwYW5kZWQpIHtcbiAgICAgIHRoaXMucHJvcHMuYWN0aW9ucy5jb2xsYXBzZVRhYmxlKHRoaXMucHJvcHMudGFibGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByb3BzLmFjdGlvbnMuZXhwYW5kVGFibGUodGhpcy5wcm9wcy50YWJsZSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlVGFibGUoKSB7XG4gICAgdGhpcy5wcm9wcy5hY3Rpb25zLnJlbW92ZURhdGFQcmV2aWV3KHRoaXMucHJvcHMudGFibGUpO1xuICAgIHRoaXMucHJvcHMuYWN0aW9ucy5yZW1vdmVUYWJsZSh0aGlzLnByb3BzLnRhYmxlKTtcbiAgfVxuXG4gIHRvZ2dsZVNvcnRDb2x1bW5zKCkge1xuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7IHNvcnRDb2x1bW5zOiAhcHJldlN0YXRlLnNvcnRDb2x1bW5zIH0pKTtcbiAgfVxuXG4gIHJlbmRlcldlbGwoKSB7XG4gICAgY29uc3QgeyB0YWJsZSB9ID0gdGhpcy5wcm9wcztcbiAgICBsZXQgaGVhZGVyO1xuICAgIGlmICh0YWJsZS5wYXJ0aXRpb25zKSB7XG4gICAgICBsZXQgcGFydGl0aW9uUXVlcnk7XG4gICAgICBsZXQgcGFydGl0aW9uQ2xpcEJvYXJkO1xuICAgICAgaWYgKHRhYmxlLnBhcnRpdGlvbnMucGFydGl0aW9uUXVlcnkpIHtcbiAgICAgICAgKHsgcGFydGl0aW9uUXVlcnkgfSA9IHRhYmxlLnBhcnRpdGlvbnMucGFydGl0aW9uUXVlcnkpO1xuICAgICAgICBjb25zdCB0dCA9IHQoJ0NvcHkgcGFydGl0aW9uIHF1ZXJ5IHRvIGNsaXBib2FyZCcpO1xuICAgICAgICBwYXJ0aXRpb25DbGlwQm9hcmQgPSAoXG4gICAgICAgICAgPENvcHlUb0NsaXBib2FyZFxuICAgICAgICAgICAgdGV4dD17cGFydGl0aW9uUXVlcnl9XG4gICAgICAgICAgICBzaG91bGRTaG93VGV4dD17ZmFsc2V9XG4gICAgICAgICAgICB0b29sdGlwVGV4dD17dHR9XG4gICAgICAgICAgICBjb3B5Tm9kZT17PGkgY2xhc3NOYW1lPVwiZmEgZmEtY2xpcGJvYXJkXCIgLz59XG4gICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGxldCBsYXRlc3QgPSBPYmplY3QuZW50cmllcyh0YWJsZS5wYXJ0aXRpb25zPy5sYXRlc3QgfHwgW10pLm1hcChcbiAgICAgICAgKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fT0ke3ZhbHVlfWAsXG4gICAgICApO1xuICAgICAgbGF0ZXN0ID0gbGF0ZXN0LmpvaW4oJy8nKTtcbiAgICAgIGhlYWRlciA9IChcbiAgICAgICAgPFdlbGwgYnNTaXplPVwic21hbGxcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPHNtYWxsPlxuICAgICAgICAgICAgICB7dCgnbGF0ZXN0IHBhcnRpdGlvbjonKX0ge2xhdGVzdH1cbiAgICAgICAgICAgIDwvc21hbGw+eycgJ31cbiAgICAgICAgICAgIHtwYXJ0aXRpb25DbGlwQm9hcmR9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvV2VsbD5cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBoZWFkZXI7XG4gIH1cblxuICByZW5kZXJDb250cm9scygpIHtcbiAgICBsZXQga2V5TGluaztcbiAgICBjb25zdCB7IHRhYmxlIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmICh0YWJsZS5pbmRleGVzICYmIHRhYmxlLmluZGV4ZXMubGVuZ3RoID4gMCkge1xuICAgICAga2V5TGluayA9IChcbiAgICAgICAgPE1vZGFsVHJpZ2dlclxuICAgICAgICAgIG1vZGFsVGl0bGU9e1xuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAge3QoJ0tleXMgZm9yIHRhYmxlJyl9IDxzdHJvbmc+e3RhYmxlLm5hbWV9PC9zdHJvbmc+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kYWxCb2R5PXt0YWJsZS5pbmRleGVzLm1hcCgoaXgsIGkpID0+IChcbiAgICAgICAgICAgIDxwcmUga2V5PXtpfT57SlNPTi5zdHJpbmdpZnkoaXgsIG51bGwsICcgICcpfTwvcHJlPlxuICAgICAgICAgICkpfVxuICAgICAgICAgIHRyaWdnZXJOb2RlPXtcbiAgICAgICAgICAgIDxJY29uVG9vbHRpcFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmYSBmYS1rZXkgcHVsbC1sZWZ0IG0tbC0yXCJcbiAgICAgICAgICAgICAgdG9vbHRpcD17dCgnVmlldyBrZXlzICYgaW5kZXhlcyAoJXMpJywgdGFibGUuaW5kZXhlcy5sZW5ndGgpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPEJ1dHRvbkdyb3VwIGNsYXNzTmFtZT1cIndzLWVsLWNvbnRyb2xzXCI+XG4gICAgICAgIHtrZXlMaW5rfVxuICAgICAgICA8SWNvblRvb2x0aXBcbiAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgYGZhIGZhLXNvcnQtJHshdGhpcy5zdGF0ZS5zb3J0Q29sdW1ucyA/ICdhbHBoYScgOiAnbnVtZXJpYyd9LWFzYyBgICtcbiAgICAgICAgICAgICdwdWxsLWxlZnQgc29ydC1jb2xzIG0tbC0yIHBvaW50ZXInXG4gICAgICAgICAgfVxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlU29ydENvbHVtbnN9XG4gICAgICAgICAgdG9vbHRpcD17XG4gICAgICAgICAgICAhdGhpcy5zdGF0ZS5zb3J0Q29sdW1uc1xuICAgICAgICAgICAgICA/IHQoJ1NvcnQgY29sdW1ucyBhbHBoYWJldGljYWxseScpXG4gICAgICAgICAgICAgIDogdCgnT3JpZ2luYWwgdGFibGUgY29sdW1uIG9yZGVyJylcbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIHt0YWJsZS5zZWxlY3RTdGFyICYmIChcbiAgICAgICAgICA8Q29weVRvQ2xpcGJvYXJkXG4gICAgICAgICAgICBjb3B5Tm9kZT17XG4gICAgICAgICAgICAgIDxJY29uVG9vbHRpcCBhcmlhLWxhYmVsPVwiQ29weVwiPlxuICAgICAgICAgICAgICAgIDxpIGFyaWEtaGlkZGVuIGNsYXNzTmFtZT1cImZhIGZhLWNsaXBib2FyZCBwdWxsLWxlZnQgbS1sLTJcIiAvPlxuICAgICAgICAgICAgICA8L0ljb25Ub29sdGlwPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dD17dGFibGUuc2VsZWN0U3Rhcn1cbiAgICAgICAgICAgIHNob3VsZFNob3dUZXh0PXtmYWxzZX1cbiAgICAgICAgICAgIHRvb2x0aXBUZXh0PXt0KCdDb3B5IFNFTEVDVCBzdGF0ZW1lbnQgdG8gdGhlIGNsaXBib2FyZCcpfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIHt0YWJsZS52aWV3ICYmIChcbiAgICAgICAgICA8U2hvd1NRTFxuICAgICAgICAgICAgc3FsPXt0YWJsZS52aWV3fVxuICAgICAgICAgICAgdG9vbHRpcFRleHQ9e3QoJ1Nob3cgQ1JFQVRFIFZJRVcgc3RhdGVtZW50Jyl9XG4gICAgICAgICAgICB0aXRsZT17dCgnQ1JFQVRFIFZJRVcgc3RhdGVtZW50Jyl9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPEljb25Ub29sdGlwXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZmEgZmEtdGltZXMgdGFibGUtcmVtb3ZlIHB1bGwtbGVmdCBtLWwtMiBwb2ludGVyXCJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLnJlbW92ZVRhYmxlfVxuICAgICAgICAgIHRvb2x0aXA9e3QoJ1JlbW92ZSB0YWJsZSBwcmV2aWV3Jyl9XG4gICAgICAgIC8+XG4gICAgICA8L0J1dHRvbkdyb3VwPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJIZWFkZXIoKSB7XG4gICAgY29uc3QgeyB0YWJsZSB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJjbGVhcmZpeCBoZWFkZXItY29udGFpbmVyXCJcbiAgICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiB0aGlzLnNldEhvdmVyKHRydWUpfVxuICAgICAgICBvbk1vdXNlTGVhdmU9eygpID0+IHRoaXMuc2V0SG92ZXIoZmFsc2UpfVxuICAgICAgPlxuICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgIGlkPVwiY29weS10by1jbGlwYm9hcmQtdG9vbHRpcFwiXG4gICAgICAgICAgcGxhY2VtZW50PVwidG9wXCJcbiAgICAgICAgICBzdHlsZT17eyBjdXJzb3I6ICdwb2ludGVyJyB9fVxuICAgICAgICAgIHRpdGxlPXt0YWJsZS5uYW1lfVxuICAgICAgICAgIHRyaWdnZXI9e1snaG92ZXInXX1cbiAgICAgICAgPlxuICAgICAgICAgIDxTdHlsZWRTcGFuXG4gICAgICAgICAgICBkYXRhLXRlc3Q9XCJjb2xsYXBzZVwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZS1uYW1lXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2UgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVRhYmxlKGUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3Ryb25nPnt0YWJsZS5uYW1lfTwvc3Ryb25nPlxuICAgICAgICAgIDwvU3R5bGVkU3Bhbj5cbiAgICAgICAgPC9Ub29sdGlwPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHVsbC1yaWdodCBoZWFkZXItcmlnaHQtc2lkZVwiPlxuICAgICAgICAgIHt0YWJsZS5pc01ldGFkYXRhTG9hZGluZyB8fCB0YWJsZS5pc0V4dHJhTWV0YWRhdGFMb2FkaW5nID8gKFxuICAgICAgICAgICAgPExvYWRpbmcgcG9zaXRpb249XCJpbmxpbmVcIiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8RmFkZVxuICAgICAgICAgICAgICBob3ZlcmVkPXt0aGlzLnN0YXRlLmhvdmVyZWR9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2UgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3RoaXMucmVuZGVyQ29udHJvbHMoKX1cbiAgICAgICAgICAgIDwvRmFkZT5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJCb2R5KCkge1xuICAgIGNvbnN0IHsgdGFibGUgfSA9IHRoaXMucHJvcHM7XG4gICAgbGV0IGNvbHM7XG4gICAgaWYgKHRhYmxlLmNvbHVtbnMpIHtcbiAgICAgIGNvbHMgPSB0YWJsZS5jb2x1bW5zLnNsaWNlKCk7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5zb3J0Q29sdW1ucykge1xuICAgICAgICBjb2xzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICBjb25zdCBjb2xBID0gYS5uYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3QgY29sQiA9IGIubmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIGlmIChjb2xBIDwgY29sQikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29sQSA+IGNvbEIpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbWV0YWRhdGEgPSAoXG4gICAgICA8ZGl2XG4gICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gdGhpcy5zZXRIb3Zlcih0cnVlKX1cbiAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiB0aGlzLnNldEhvdmVyKGZhbHNlKX1cbiAgICAgICAgY3NzPXt7IHBhZGRpbmdUb3A6IDYgfX1cbiAgICAgID5cbiAgICAgICAge3RoaXMucmVuZGVyV2VsbCgpfVxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHtjb2xzICYmXG4gICAgICAgICAgICBjb2xzLm1hcChjb2wgPT4gPENvbHVtbkVsZW1lbnQgY29sdW1uPXtjb2x9IGtleT17Y29sLm5hbWV9IC8+KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICAgIHJldHVybiBtZXRhZGF0YTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPENvbGxhcHNlLlBhbmVsXG4gICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICBoZWFkZXI9e3RoaXMucmVuZGVySGVhZGVyKCl9XG4gICAgICAgIGNsYXNzTmFtZT1cIlRhYmxlRWxlbWVudFwiXG4gICAgICAgIGZvcmNlUmVuZGVyPVwidHJ1ZVwiXG4gICAgICA+XG4gICAgICAgIHt0aGlzLnJlbmRlckJvZHkoKX1cbiAgICAgIDwvQ29sbGFwc2UuUGFuZWw+XG4gICAgKTtcbiAgfVxufVxuXG5UYWJsZUVsZW1lbnQucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuVGFibGVFbGVtZW50LmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuZXhwb3J0IGRlZmF1bHQgVGFibGVFbGVtZW50O1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\nclass TableElement extends React.PureComponent {\n  constructor(props) {var _context, _context2, _context3;\n    super(props);\n    this.state = {\n      sortColumns: false,\n      hovered: false };\n\n    this.toggleSortColumns = _bindInstanceProperty(_context = this.toggleSortColumns).call(_context, this);\n    this.removeTable = _bindInstanceProperty(_context2 = this.removeTable).call(_context2, this);\n    this.setHover = _debounce(_bindInstanceProperty(_context3 = this.setHover).call(_context3, this), 100);\n  }\n\n  setHover(hovered) {\n    this.setState({ hovered });\n  }\n\n  popSelectStar() {\n    const qe = {\n      id: shortid.generate(),\n      title: this.props.table.name,\n      dbId: this.props.table.dbId,\n      autorun: true,\n      sql: this.props.table.selectStar };\n\n    this.props.actions.addQueryEditor(qe);\n  }\n\n  toggleTable(e) {\n    e.preventDefault();\n    if (this.props.table.expanded) {\n      this.props.actions.collapseTable(this.props.table);\n    } else {\n      this.props.actions.expandTable(this.props.table);\n    }\n  }\n\n  removeTable() {\n    this.props.actions.removeDataPreview(this.props.table);\n    this.props.actions.removeTable(this.props.table);\n  }\n\n  toggleSortColumns() {\n    this.setState(prevState => ({ sortColumns: !prevState.sortColumns }));\n  }\n\n  renderWell() {\n    const { table } = this.props;\n    let header;\n    if (table.partitions) {var _context4, _table$partitions;\n      let partitionQuery;\n      let partitionClipBoard;\n      if (table.partitions.partitionQuery) {\n        ({ partitionQuery } = table.partitions.partitionQuery);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard =\n        ___EmotionJSX(CopyToClipboard, {\n          text: partitionQuery,\n          shouldShowText: false,\n          tooltipText: tt,\n          copyNode: ___EmotionJSX(\"i\", { className: \"fa fa-clipboard\" }) });\n\n\n      }\n      let latest = _mapInstanceProperty(_context4 = _Object$entries(((_table$partitions = table.partitions) == null ? void 0 : _table$partitions.latest) || [])).call(_context4,\n      ([key, value]) => `${key}=${value}`);\n\n      latest = latest.join('/');\n      header =\n      ___EmotionJSX(Well, { bsSize: \"small\" },\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(\"small\", null,\n      t('latest partition:'), \" \", latest),\n      ' ',\n      partitionClipBoard));\n\n\n\n    }\n    return header;\n  }\n\n  renderControls() {\n    let keyLink;\n    const { table } = this.props;\n    if (table.indexes && table.indexes.length > 0) {var _context5;\n      keyLink =\n      ___EmotionJSX(ModalTrigger, {\n        modalTitle:\n        ___EmotionJSX(\"div\", null,\n        t('Keys for table'), \" \", ___EmotionJSX(\"strong\", null, table.name)),\n\n\n        modalBody: _mapInstanceProperty(_context5 = table.indexes).call(_context5, (ix, i) =>\n        ___EmotionJSX(\"pre\", { key: i }, _JSON$stringify(ix, null, '  '))),\n\n        triggerNode:\n        ___EmotionJSX(IconTooltip, {\n          className: \"fa fa-key pull-left m-l-2\",\n          tooltip: t('View keys & indexes (%s)', table.indexes.length) }) });\n\n\n\n\n    }\n    return (\n      ___EmotionJSX(ButtonGroup, { className: \"ws-el-controls\" },\n      keyLink,\n      ___EmotionJSX(IconTooltip, {\n        className:\n        `fa fa-sort-${!this.state.sortColumns ? 'alpha' : 'numeric'}-asc ` +\n        'pull-left sort-cols m-l-2 pointer',\n\n        onClick: this.toggleSortColumns,\n        tooltip:\n        !this.state.sortColumns ?\n        t('Sort columns alphabetically') :\n        t('Original table column order') }),\n\n\n      table.selectStar &&\n      ___EmotionJSX(CopyToClipboard, {\n        copyNode:\n        ___EmotionJSX(IconTooltip, { \"aria-label\": \"Copy\" },\n        ___EmotionJSX(\"i\", { \"aria-hidden\": true, className: \"fa fa-clipboard pull-left m-l-2\" })),\n\n\n        text: table.selectStar,\n        shouldShowText: false,\n        tooltipText: t('Copy SELECT statement to the clipboard') }),\n\n\n      table.view &&\n      ___EmotionJSX(ShowSQL, {\n        sql: table.view,\n        tooltipText: t('Show CREATE VIEW statement'),\n        title: t('CREATE VIEW statement') }),\n\n\n      ___EmotionJSX(IconTooltip, {\n        className: \"fa fa-times table-remove pull-left m-l-2 pointer\",\n        onClick: this.removeTable,\n        tooltip: t('Remove table preview') })));\n\n\n\n  }\n\n  renderHeader() {\n    const { table } = this.props;\n    return (\n      ___EmotionJSX(\"div\", {\n        className: \"clearfix header-container\",\n        onMouseEnter: () => this.setHover(true),\n        onMouseLeave: () => this.setHover(false) },\n\n      ___EmotionJSX(Tooltip, {\n        id: \"copy-to-clipboard-tooltip\",\n        placement: \"top\",\n        style: { cursor: 'pointer' },\n        title: table.name,\n        trigger: ['hover'] },\n\n      ___EmotionJSX(StyledSpan, {\n        \"data-test\": \"collapse\",\n        className: \"table-name\",\n        onClick: e => {\n          this.toggleTable(e);\n        } },\n\n      ___EmotionJSX(\"strong\", null, table.name))),\n\n\n\n      ___EmotionJSX(\"div\", { className: \"pull-right header-right-side\" },\n      table.isMetadataLoading || table.isExtraMetadataLoading ?\n      ___EmotionJSX(Loading, { position: \"inline\" }) :\n\n      ___EmotionJSX(Fade, {\n        hovered: this.state.hovered,\n        onClick: e => e.stopPropagation() },\n\n      this.renderControls()))));\n\n\n\n\n\n  }\n\n  renderBody() {\n    const { table } = this.props;\n    let cols;\n    if (table.columns) {var _context6;\n      cols = _sliceInstanceProperty(_context6 = table.columns).call(_context6);\n      if (this.state.sortColumns) {\n        _sortInstanceProperty(cols).call(cols, (a, b) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          if (colA < colB) {\n            return -1;\n          }\n          if (colA > colB) {\n            return 1;\n          }\n          return 0;\n        });\n      }\n    }\n\n    const metadata =\n    ___EmotionJSX(\"div\", {\n      onMouseEnter: () => this.setHover(true),\n      onMouseLeave: () => this.setHover(false),\n      css: _ref },\n\n    this.renderWell(),\n    ___EmotionJSX(\"div\", null,\n    cols &&\n    _mapInstanceProperty(cols).call(cols, col => ___EmotionJSX(ColumnElement, { column: col, key: col.name }))));\n\n\n\n    return metadata;\n  }\n\n  render() {\n    return (\n      ___EmotionJSX(Collapse.Panel, _extends({},\n      this.props, {\n        header: this.renderHeader(),\n        className: \"TableElement\",\n        forceRender: \"true\" }),\n\n      this.renderBody()));\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nTableElement.propTypes = propTypes;\nTableElement.defaultProps = defaultProps;const _default =\n\nTableElement;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(StyledSpan, \"StyledSpan\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(TableElement, \"TableElement\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/SqlLab/components/TableElement.jsx"],"names":["React","PropTypes","Well","Collapse","ButtonGroup","shortid","t","styled","Fade","Tooltip","CopyToClipboard","IconTooltip","ColumnElement","ShowSQL","ModalTrigger","Loading","propTypes","table","object","actions","defaultProps","StyledSpan","span","theme","colors","primary","dark1","dark2","TableElement","PureComponent","constructor","props","state","sortColumns","hovered","toggleSortColumns","removeTable","setHover","setState","popSelectStar","qe","id","generate","title","name","dbId","autorun","sql","selectStar","addQueryEditor","toggleTable","e","preventDefault","expanded","collapseTable","expandTable","removeDataPreview","prevState","renderWell","header","partitions","partitionQuery","partitionClipBoard","tt","latest","key","value","join","renderControls","keyLink","indexes","length","ix","i","view","renderHeader","cursor","isMetadataLoading","isExtraMetadataLoading","stopPropagation","renderBody","cols","columns","a","b","colA","toUpperCase","colB","metadata","col","render"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Well } from 'react-bootstrap';\nimport Collapse from 'src/common/components/Collapse';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport shortid from 'shortid';\nimport { t, styled } from '@superset-ui/core';\nimport { debounce } from 'lodash';\n\nimport Fade from 'src/common/components/Fade';\nimport { Tooltip } from 'src/common/components/Tooltip';\nimport CopyToClipboard from '../../components/CopyToClipboard';\nimport { IconTooltip } from '../../components/IconTooltip';\nimport ColumnElement from './ColumnElement';\nimport ShowSQL from './ShowSQL';\nimport ModalTrigger from '../../components/ModalTrigger';\nimport Loading from '../../components/Loading';\n\nconst propTypes = {\n  table: PropTypes.object,\n  actions: PropTypes.object,\n};\n\nconst defaultProps = {\n  actions: {},\n  table: null,\n};\n\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &: hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;\n\nclass TableElement extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sortColumns: false,\n      hovered: false,\n    };\n    this.toggleSortColumns = this.toggleSortColumns.bind(this);\n    this.removeTable = this.removeTable.bind(this);\n    this.setHover = debounce(this.setHover.bind(this), 100);\n  }\n\n  setHover(hovered) {\n    this.setState({ hovered });\n  }\n\n  popSelectStar() {\n    const qe = {\n      id: shortid.generate(),\n      title: this.props.table.name,\n      dbId: this.props.table.dbId,\n      autorun: true,\n      sql: this.props.table.selectStar,\n    };\n    this.props.actions.addQueryEditor(qe);\n  }\n\n  toggleTable(e) {\n    e.preventDefault();\n    if (this.props.table.expanded) {\n      this.props.actions.collapseTable(this.props.table);\n    } else {\n      this.props.actions.expandTable(this.props.table);\n    }\n  }\n\n  removeTable() {\n    this.props.actions.removeDataPreview(this.props.table);\n    this.props.actions.removeTable(this.props.table);\n  }\n\n  toggleSortColumns() {\n    this.setState(prevState => ({ sortColumns: !prevState.sortColumns }));\n  }\n\n  renderWell() {\n    const { table } = this.props;\n    let header;\n    if (table.partitions) {\n      let partitionQuery;\n      let partitionClipBoard;\n      if (table.partitions.partitionQuery) {\n        ({ partitionQuery } = table.partitions.partitionQuery);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard = (\n          <CopyToClipboard\n            text={partitionQuery}\n            shouldShowText={false}\n            tooltipText={tt}\n            copyNode={<i className=\"fa fa-clipboard\" />}\n          />\n        );\n      }\n      let latest = Object.entries(table.partitions?.latest || []).map(\n        ([key, value]) => `${key}=${value}`,\n      );\n      latest = latest.join('/');\n      header = (\n        <Well bsSize=\"small\">\n          <div>\n            <small>\n              {t('latest partition:')} {latest}\n            </small>{' '}\n            {partitionClipBoard}\n          </div>\n        </Well>\n      );\n    }\n    return header;\n  }\n\n  renderControls() {\n    let keyLink;\n    const { table } = this.props;\n    if (table.indexes && table.indexes.length > 0) {\n      keyLink = (\n        <ModalTrigger\n          modalTitle={\n            <div>\n              {t('Keys for table')} <strong>{table.name}</strong>\n            </div>\n          }\n          modalBody={table.indexes.map((ix, i) => (\n            <pre key={i}>{JSON.stringify(ix, null, '  ')}</pre>\n          ))}\n          triggerNode={\n            <IconTooltip\n              className=\"fa fa-key pull-left m-l-2\"\n              tooltip={t('View keys & indexes (%s)', table.indexes.length)}\n            />\n          }\n        />\n      );\n    }\n    return (\n      <ButtonGroup className=\"ws-el-controls\">\n        {keyLink}\n        <IconTooltip\n          className={\n            `fa fa-sort-${!this.state.sortColumns ? 'alpha' : 'numeric'}-asc ` +\n            'pull-left sort-cols m-l-2 pointer'\n          }\n          onClick={this.toggleSortColumns}\n          tooltip={\n            !this.state.sortColumns\n              ? t('Sort columns alphabetically')\n              : t('Original table column order')\n          }\n        />\n        {table.selectStar && (\n          <CopyToClipboard\n            copyNode={\n              <IconTooltip aria-label=\"Copy\">\n                <i aria-hidden className=\"fa fa-clipboard pull-left m-l-2\" />\n              </IconTooltip>\n            }\n            text={table.selectStar}\n            shouldShowText={false}\n            tooltipText={t('Copy SELECT statement to the clipboard')}\n          />\n        )}\n        {table.view && (\n          <ShowSQL\n            sql={table.view}\n            tooltipText={t('Show CREATE VIEW statement')}\n            title={t('CREATE VIEW statement')}\n          />\n        )}\n        <IconTooltip\n          className=\"fa fa-times table-remove pull-left m-l-2 pointer\"\n          onClick={this.removeTable}\n          tooltip={t('Remove table preview')}\n        />\n      </ButtonGroup>\n    );\n  }\n\n  renderHeader() {\n    const { table } = this.props;\n    return (\n      <div\n        className=\"clearfix header-container\"\n        onMouseEnter={() => this.setHover(true)}\n        onMouseLeave={() => this.setHover(false)}\n      >\n        <Tooltip\n          id=\"copy-to-clipboard-tooltip\"\n          placement=\"top\"\n          style={{ cursor: 'pointer' }}\n          title={table.name}\n          trigger={['hover']}\n        >\n          <StyledSpan\n            data-test=\"collapse\"\n            className=\"table-name\"\n            onClick={e => {\n              this.toggleTable(e);\n            }}\n          >\n            <strong>{table.name}</strong>\n          </StyledSpan>\n        </Tooltip>\n\n        <div className=\"pull-right header-right-side\">\n          {table.isMetadataLoading || table.isExtraMetadataLoading ? (\n            <Loading position=\"inline\" />\n          ) : (\n            <Fade\n              hovered={this.state.hovered}\n              onClick={e => e.stopPropagation()}\n            >\n              {this.renderControls()}\n            </Fade>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderBody() {\n    const { table } = this.props;\n    let cols;\n    if (table.columns) {\n      cols = table.columns.slice();\n      if (this.state.sortColumns) {\n        cols.sort((a, b) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          if (colA < colB) {\n            return -1;\n          }\n          if (colA > colB) {\n            return 1;\n          }\n          return 0;\n        });\n      }\n    }\n\n    const metadata = (\n      <div\n        onMouseEnter={() => this.setHover(true)}\n        onMouseLeave={() => this.setHover(false)}\n        css={{ paddingTop: 6 }}\n      >\n        {this.renderWell()}\n        <div>\n          {cols &&\n            cols.map(col => <ColumnElement column={col} key={col.name} />)}\n        </div>\n      </div>\n    );\n    return metadata;\n  }\n\n  render() {\n    return (\n      <Collapse.Panel\n        {...this.props}\n        header={this.renderHeader()}\n        className=\"TableElement\"\n        forceRender=\"true\"\n      >\n        {this.renderBody()}\n      </Collapse.Panel>\n    );\n  }\n}\n\nTableElement.propTypes = propTypes;\nTableElement.defaultProps = defaultProps;\n\nexport default TableElement;\n"]},"metadata":{},"sourceType":"module"}