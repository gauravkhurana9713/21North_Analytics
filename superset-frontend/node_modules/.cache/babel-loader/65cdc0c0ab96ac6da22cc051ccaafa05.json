{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _Object$values from \"@babel/runtime-corejs3/core-js-stable/object/values\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo, useState } from 'react';\nimport { styled } from '@superset-ui/core';\nimport CascadePopover from '../CascadeFilters/CascadePopover';\nimport { buildCascadeFiltersTree } from './utils';\nimport { useFilters } from '../state';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 4}px;\n  &:hover {\n    cursor: pointer;\n  }\n`;\nconst FilterControls = ({ directPathToChild, dataMaskSelected, onFilterSelectionChange }) => {\n  const [visiblePopoverId, setVisiblePopoverId] = useState(null);\n  const filters = useFilters();\n  const filterValues = _Object$values(filters);\n  const cascadeFilters = useMemo(() => {\n    const filtersWithValue = _mapInstanceProperty(filterValues).call(filterValues, filter => {var _dataMaskSelected$fil, _dataMaskSelected$fil2;return {\n        ...filter,\n        currentValue: (_dataMaskSelected$fil = dataMaskSelected[filter.id]) == null ? void 0 : (_dataMaskSelected$fil2 = _dataMaskSelected$fil.currentState) == null ? void 0 : _dataMaskSelected$fil2.value };});\n\n    return buildCascadeFiltersTree(filtersWithValue);\n  }, [filterValues, dataMaskSelected]);\n  return ___EmotionJSX(Wrapper, null,\n  _mapInstanceProperty(cascadeFilters).call(cascadeFilters, filter => ___EmotionJSX(CascadePopover, { \"data-test\": \"cascade-filters-control\", key: filter.id, visible: visiblePopoverId === filter.id, onVisibleChange: visible => setVisiblePopoverId(visible ? filter.id : null), filter: filter, onFilterSelectionChange: onFilterSelectionChange, directPathToChild: directPathToChild })));\n\n};__signature__(FilterControls, \"useState{[visiblePopoverId, setVisiblePopoverId](null)}\\nuseFilters{filters}\\nuseMemo{cascadeFilters}\", () => [useFilters]);const _default =\nFilterControls;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Wrapper, \"Wrapper\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControls.tsx\");reactHotLoader.register(FilterControls, \"FilterControls\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControls.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControls.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControls.tsx"],"names":[],"mappings":"wgBAAA;;;;;;;;;;;;;;;;;AAiBG;AACH,OAAO,KAAP,IAAoB,OAApB,EAA6B,QAA7B,QAA6C,OAA7C;AAEA,SAAmB,MAAnB,QAAiC,mBAAjC;AACA,OAAO,cAAP,MAA2B,kCAA3B;AACA,SAAS,uBAAT,QAAwC,SAAxC;AACA,SAAS,UAAT,QAA2B,UAA3B,C;AAGA,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG;aACb,CAAC,EAAE,KAAF,EAAD,KAAe,KAAK,CAAC,QAAN,GAAiB,CAAC;;;;AAI7C,CALD;AAaA,MAAM,cAAc,GAA4B,CAAC,EAC/C,iBAD+C,EAE/C,gBAF+C,EAG/C,uBAH+C,EAAD,KAI3C;AACH,QAAM,CAAC,gBAAD,EAAmB,mBAAnB,IAA0C,QAAQ,CAAgB,IAAhB,CAAxD;AACA,QAAM,OAAO,GAAG,UAAU,EAA1B;AACA,QAAM,YAAY,GAAG,eAAsB,OAAtB,CAArB;AAEA,QAAM,cAAc,GAAG,OAAO,CAAC,MAAK;AAClC,UAAM,gBAAgB,GAAG,qBAAA,YAAY,MAAZ,CAAA,YAAY,EAAK,MAAM,8DAAK;AACnD,WAAG,MADgD;AAEnD,QAAA,YAAY,2BAAE,gBAAgB,CAAC,MAAM,CAAC,EAAR,CAAlB,+CAAE,sBAA6B,YAA/B,qBAAE,uBAA2C,KAFN,EAAL,EAAX,CAArC;;AAIA,WAAO,uBAAuB,CAAC,gBAAD,CAA9B;AACD,GAN6B,EAM3B,CAAC,YAAD,EAAe,gBAAf,CAN2B,CAA9B;AAQA,SACE,cAAC,OAAD;AACG,uBAAA,cAAc,MAAd,CAAA,cAAc,EAAK,MAAM,IACxB,cAAC,cAAD,IACE,aAAU,yBADZ,EAEE,GAAG,EAAE,MAAM,CAAC,EAFd,EAGE,OAAO,EAAE,gBAAgB,KAAK,MAAM,CAAC,EAHvC,EAIE,eAAe,EAAE,OAAO,IACtB,mBAAmB,CAAC,OAAO,GAAG,MAAM,CAAC,EAAV,GAAe,IAAvB,CALvB,EAOE,MAAM,EAAE,MAPV,EAQE,uBAAuB,EAAE,uBAR3B,EASE,iBAAiB,EAAE,iBATrB,GADa,CADjB,CADF;;AAiBD,CAlCD,C,cAAM,c,kHAMY,U;AA8BH,c,CAAf,wB,iLAjDM,O,kJAaA,c","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC, useMemo, useState } from 'react';\nimport { DataMaskUnit } from 'src/dataMask/types';\nimport { DataMask, styled } from '@superset-ui/core';\nimport CascadePopover from '../CascadeFilters/CascadePopover';\nimport { buildCascadeFiltersTree } from './utils';\nimport { useFilters } from '../state';\nimport { Filter } from '../../types';\n\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 4}px;\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\ntype FilterControlsProps = {\n  directPathToChild?: string[];\n  dataMaskSelected: DataMaskUnit;\n  onFilterSelectionChange: (filter: Filter, dataMask: DataMask) => void;\n};\n\nconst FilterControls: FC<FilterControlsProps> = ({\n  directPathToChild,\n  dataMaskSelected,\n  onFilterSelectionChange,\n}) => {\n  const [visiblePopoverId, setVisiblePopoverId] = useState<string | null>(null);\n  const filters = useFilters();\n  const filterValues = Object.values<Filter>(filters);\n\n  const cascadeFilters = useMemo(() => {\n    const filtersWithValue = filterValues.map(filter => ({\n      ...filter,\n      currentValue: dataMaskSelected[filter.id]?.currentState?.value,\n    }));\n    return buildCascadeFiltersTree(filtersWithValue);\n  }, [filterValues, dataMaskSelected]);\n\n  return (\n    <Wrapper>\n      {cascadeFilters.map(filter => (\n        <CascadePopover\n          data-test=\"cascade-filters-control\"\n          key={filter.id}\n          visible={visiblePopoverId === filter.id}\n          onVisibleChange={visible =>\n            setVisiblePopoverId(visible ? filter.id : null)\n          }\n          filter={filter}\n          onFilterSelectionChange={onFilterSelectionChange}\n          directPathToChild={directPathToChild}\n        />\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default FilterControls;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}