{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";import _Set from \"@babel/runtime-corejs3/core-js-stable/set\";import _Object$keys from \"@babel/runtime-corejs3/core-js-stable/object/keys\";import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";import _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};import { areObjectsEqual } from '../../../reduxUtils';\nexport const arrayDiff = (a, b) => [\n..._filterInstanceProperty(a).call(a, x => !_includesInstanceProperty(b).call(b, x)),\n..._filterInstanceProperty(b).call(b, x => !_includesInstanceProperty(a).call(a, x))];\n\nexport const getAffectedOwnDataCharts = (ownDataCharts, appliedOwnDataCharts) => {var _context;\n  const chartIds = _Object$keys(ownDataCharts);\n  const appliedChartIds = _Object$keys(appliedOwnDataCharts);\n  const affectedIds = _filterInstanceProperty(_context = arrayDiff(chartIds, appliedChartIds)).call(_context, id => {var _ownDataCharts$id, _appliedOwnDataCharts;return ((_ownDataCharts$id = ownDataCharts[id]) == null ? void 0 : _ownDataCharts$id.extraFormData) || ((_appliedOwnDataCharts =\n    appliedOwnDataCharts[id]) == null ? void 0 : _appliedOwnDataCharts.extraFormData);});\n  const checkForUpdateIds = new _Set([...chartIds, ...appliedChartIds]);\n  _forEachInstanceProperty(checkForUpdateIds).call(checkForUpdateIds, chartId => {var _ownDataCharts$chartI, _appliedOwnDataCharts2;\n    if (!areObjectsEqual((_ownDataCharts$chartI = ownDataCharts[chartId]) == null ? void 0 : _ownDataCharts$chartI.extraFormData, (_appliedOwnDataCharts2 = appliedOwnDataCharts[chartId]) == null ? void 0 : _appliedOwnDataCharts2.extraFormData)) {\n      affectedIds.push(chartId);\n    }\n  });\n  return [...new _Set(affectedIds)];\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(arrayDiff, \"arrayDiff\", \"/app/superset-frontend/src/dashboard/util/charts/getOwnDataCharts.ts\");reactHotLoader.register(getAffectedOwnDataCharts, \"getAffectedOwnDataCharts\", \"/app/superset-frontend/src/dashboard/util/charts/getOwnDataCharts.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/dashboard/util/charts/getOwnDataCharts.ts"],"names":[],"mappings":"qwBAmBA,SAAS,eAAT,QAAgC,qBAAhC;AAEA,OAAO,MAAM,SAAS,GAAG,CAAC,CAAD,EAAc,CAAd,KAA8B;AACrD,GAAG,wBAAA,CAAC,MAAD,CAAA,CAAC,EAAQ,CAAC,IAAI,CAAC,0BAAA,CAAC,MAAD,CAAA,CAAC,EAAU,CAAV,CAAf,CADiD;AAErD,GAAG,wBAAA,CAAC,MAAD,CAAA,CAAC,EAAQ,CAAC,IAAI,CAAC,0BAAA,CAAC,MAAD,CAAA,CAAC,EAAU,CAAV,CAAf,CAFiD,CAAhD;;AAKP,OAAO,MAAM,wBAAwB,GAAG,CACtC,aADsC,EAEtC,oBAFsC,KAGpC;AACF,QAAM,QAAQ,GAAG,aAAY,aAAZ,CAAjB;AACA,QAAM,eAAe,GAAG,aAAY,oBAAZ,CAAxB;AACA,QAAM,WAAW,GAAa,mCAAA,SAAS,CAAC,QAAD,EAAW,eAAX,CAAT,iBAC5B,EAAE,yDACA,sBAAA,aAAa,CAAC,EAAD,CAAb,uCAAmB,aAAnB;AACA,IAAA,oBAAoB,CAAC,EAAD,CADpB,qBACA,sBAA0B,aAD1B,CADA,EAD0B,CAA9B;AAKA,QAAM,iBAAiB,GAAG,SAAgB,CAAC,GAAG,QAAJ,EAAc,GAAG,eAAjB,CAAhB,CAA1B;AACA,2BAAA,iBAAiB,MAAjB,CAAA,iBAAiB,EAAS,OAAO,IAAG;AAClC,QACE,CAAC,eAAe,0BACd,aAAa,CAAC,OAAD,CADC,qBACd,sBAAwB,aADV,4BAEd,oBAAoB,CAAC,OAAD,CAFN,qBAEd,uBAA+B,aAFjB,CADlB,EAKE;AACA,MAAA,WAAW,CAAC,IAAZ,CAAiB,OAAjB;AACD;AACF,GATgB,CAAjB;AAUA,SAAO,CAAC,GAAG,SAAQ,WAAR,CAAJ,CAAP;AACD,CAvBM,C,iLALM,S,+GAKA,wB","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { JsonObject } from '@superset-ui/core';\nimport { areObjectsEqual } from '../../../reduxUtils';\n\nexport const arrayDiff = (a: string[], b: string[]) => [\n  ...a.filter(x => !b.includes(x)),\n  ...b.filter(x => !a.includes(x)),\n];\n\nexport const getAffectedOwnDataCharts = (\n  ownDataCharts: JsonObject,\n  appliedOwnDataCharts: JsonObject,\n) => {\n  const chartIds = Object.keys(ownDataCharts);\n  const appliedChartIds = Object.keys(appliedOwnDataCharts);\n  const affectedIds: string[] = arrayDiff(chartIds, appliedChartIds).filter(\n    id =>\n      ownDataCharts[id]?.extraFormData ||\n      appliedOwnDataCharts[id]?.extraFormData,\n  );\n  const checkForUpdateIds = new Set<string>([...chartIds, ...appliedChartIds]);\n  checkForUpdateIds.forEach(chartId => {\n    if (\n      !areObjectsEqual(\n        ownDataCharts[chartId]?.extraFormData,\n        appliedOwnDataCharts[chartId]?.extraFormData,\n      )\n    ) {\n      affectedIds.push(chartId);\n    }\n  });\n  return [...new Set(affectedIds)];\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}